<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>혜택 카드 스와이프</title>

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css">

<style>
  * {box-sizing:border-box;margin:0;padding:0;}
  body {
    font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo",
      system-ui,sans-serif;
    background:#f5f5f7;
    padding:20px;
  }

  .benefit-card {
    max-width:360px;
    margin:0 auto;
    background:#fff;
    border-radius:18px;
    border:1px solid #e3e4ea;
    padding:20px 18px 16px;
    position:relative;
  }

  /* 안쪽만 슬라이드, 카드 높이는 거의 고정 느낌 */
  .benefit-card__swiper {
    min-height:80px;
  }

  .benefit-card__title-row {
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    margin-bottom:8px;
  }
  .benefit-card__title {
    font-size:16px;
    font-weight:600;
    color:#111;
    padding-right:8px;
  }
  .benefit-card__rate {
    font-size:18px;
    font-weight:700;
    color:#1d3f90;
    white-space:nowrap;
  }

  .benefit-card__desc {
    font-size:13px;
    line-height:1.5;
    color:#7b7f88;
  }

  /* 하단 인덱스 + 재생/정지 버튼 */
  .benefit-card__pager {
    position:absolute;
    right:18px;
    bottom:12px;
    padding:4px 10px 4px 12px;
    border-radius:999px;
    border:none;
    background:#f4f5f8;
    display:inline-flex;
    align-items:center;
    gap:6px;
    font-size:12px;
    color:#555;
    cursor:pointer;
  }
  .benefit-card__pager:active {
    background:#e0e2e7;
  }

  .benefit-card__counter {
    display:inline-block;
  }

  /* 아이콘 버튼 */
  #benefitToggle {
    display:inline-block;
    width:16px;
    height:16px;
    background-size:contain;
    background-repeat:no-repeat;
    background-position:center;
    z-index:9999;position: relative;
  }

  #benefitToggle {
    background-image:url('https://cdn-icons-png.flaticon.com/512/727/727245.png');
  }

  #benefitToggle.active {
    background-image:url('https://cdn-icons-png.flaticon.com/512/727/727240.png');
  }
</style>
</head>
<body>

<div class="benefit-card">
  <!-- 안쪽만 스와이프되는 영역 -->
  <div class="benefit-card__swiper swiper">
    <div class="swiper-wrapper">
      <!-- slide 1 -->
      <div class="swiper-slide">
        <div class="benefit-card__title-row">
          <p class="benefit-card__title">
            스마트크루즈컨트롤 장치 장착 특약
          </p>
          <p class="benefit-card__rate">42.1%</p>
        </div>
        <p class="benefit-card__desc">
          출고시 스마트크루즈컨트롤장치 장착시 만30세 미만
        </p>
      </div>

      <!-- slide 2 -->
      <div class="swiper-slide">
        <div class="benefit-card__title-row">
          <p class="benefit-card__title">
            블랙박스 장착 특약
          </p>
          <p class="benefit-card__rate">7.0%</p>
        </div>
        <p class="benefit-card__desc">
          내장형 블랙박스, 차량등록 22년 이후
        </p>
      </div>

      <!-- slide 3 -->
      <div class="swiper-slide">
        <div class="benefit-card__title-row">
          <p class="benefit-card__title">
            마일리지 할인 특약
          </p>
          <p class="benefit-card__rate">37.7%</p>
        </div>
        <p class="benefit-card__desc">
          연간 2천km 이하 주행, 65세 미만, 커넥티드 기능 가입
        </p>
      </div>
    </div>
  </div>

  <!-- 하단 고정 인덱스/버튼 -->
  <button type="button" class="benefit-card__pager" id="benefitPager">
    <span class="benefit-card__counter">
      <span id="benefitCurrent">1</span> / <span id="benefitTotal">3</span>
    </span>
    <span class="benefit-card__arrow" id="benefitToggle"></span>
  </button>
</div>

<!-- Swiper JS -->
<script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var slides = document.querySelectorAll('.benefit-card__swiper .swiper-slide');
    var total = slides.length;

    var currentEl = document.getElementById('benefitCurrent');
    var totalEl   = document.getElementById('benefitTotal');
    var pagerBtn  = document.getElementById('benefitPager');
    var toggleEl  = document.getElementById('benefitToggle');

    totalEl.textContent = total;

    // Swiper 초기화 (처음에는 자동 롤링 ON)
    var swiper = new Swiper('.benefit-card__swiper', {
      loop: true,
      autoHeight: false,
      allowTouchMove: true, // 모바일 스와이프
      autoplay: {
        delay: 3000,
        disableOnInteraction: false
      }
    });

    function updateIndex() {
      currentEl.textContent = swiper.realIndex + 1;
    }

    swiper.on('slideChange', updateIndex);
    updateIndex();

    // 초기 상태: 자동 롤링 중 → active = 재생 아이콘
    // (원하는 반대로 쓰고 싶으면 여기 반대로 세팅하면 됨)
    toggleEl.classList.add('active'); // ▶ 아이콘

    // 버튼 클릭 시
    pagerBtn.addEventListener('click', function (e) {
      // 아이콘 부분 클릭인지, 카운터 쪽 클릭인지 상관없이
      // 일단 "재생/정지 토글"만 수행하게 할 수도 있고,
      // 필요하면 영역별로 나눠도 됨

      // 재생 중이면 -> 정지
      if (toggleEl.classList.contains('active')) {
        swiper.autoplay.stop();
        toggleEl.classList.remove('active'); // ⬛ 아이콘(정지)
      } else {
        // 정지 상태면 -> 재생
        swiper.autoplay.start();
        toggleEl.classList.add('active'); // ▶ 아이콘(재생)
      }
    });
  });
</script>

</body>
</html>